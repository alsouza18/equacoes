<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö Sistema Educativo Completo: Equa√ß√µes e Fun√ß√µes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* Navega√ß√£o Principal */
        .main-nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .nav-button {
            background: rgba(255,255,255,0.9);
            border: none;
            padding: 15px 30px;
            border-radius: 20px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .nav-button.active {
            background: #28a745;
            color: white;
        }

        /* Sistema de Cards */
        .main-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            min-height: 600px;
        }

        /* Seletor de Grau */
        .degree-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .degree-btn {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            padding: 12px 25px;
            border-radius: 15px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .degree-btn:hover {
            border-color: #667eea;
            background: #e9ecef;
        }

        .degree-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        /* Sistema de Abas */
        .tabs {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 25px;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 15px;
        }

        .tab {
            background: none;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #666;
        }

        .tab:hover {
            background: #f8f9fa;
            color: #333;
        }

        .tab.active {
            background: #667eea;
            color: white;
        }

        /* Conte√∫do das Abas */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Quadro de Desempenho */
        .performance-board {
            background: linear-gradient(135deg, #f8f9ff 0%, #e9ecff 100%);
            border: 2px solid #667eea;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.1);
        }

        .performance-board h3 {
            text-align: center;
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .performance-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            max-width: 600px;
            margin: 0 auto;
        }

        .stat-item {
            background: white;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .stat-item:hover {
            transform: translateY(-2px);
        }

        .stat-icon {
            font-size: 1.5rem;
            margin-bottom: 8px;
            display: block;
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }

        .stat-correct .stat-number {
            color: #28a745;
        }

        .stat-wrong .stat-number {
            color: #dc3545;
        }

        .stat-total .stat-number {
            color: #667eea;
        }

        .stat-percentage .stat-number {
            color: #ffc107;
        }

        /* Seletor de Tipo de Exerc√≠cio */
        .exercise-type-selector {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .exercise-type-selector h3 {
            text-align: center;
            color: #333;
            margin-bottom: 15px;
        }

        .exercise-types {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .exercise-type-btn {
            background: white;
            border: 2px solid #dee2e6;
            padding: 15px 20px;
            border-radius: 12px;
            font-size: 0.95rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #333;
        }

        .exercise-type-btn:hover {
            border-color: #667eea;
            background: #f8f9ff;
            transform: scale(1.02);
        }

        .exercise-type-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        /* Enunciados Explicativos */
        .exercise-explanation {
            background: #e8f4fd;
            border: 1px solid #bee5eb;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .explanation-content h4 {
            color: #0c5460;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .explanation-content p {
            color: #0c5460;
            line-height: 1.5;
            margin: 0;
        }

        .explanation-content ul {
            margin: 10px 0 0 20px;
            color: #0c5460;
        }

        .explanation-content li {
            margin: 5px 0;
        }

        /* N√≠veis de Dificuldade */
        .difficulty-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .difficulty-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 15px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .difficulty-easy {
            background: #28a745;
            color: white;
        }

        .difficulty-medium {
            background: #ffc107;
            color: #333;
        }

        .difficulty-hard {
            background: #dc3545;
            color: white;
        }

        .difficulty-btn:hover {
            transform: scale(1.05);
        }

        .difficulty-btn.active {
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
        }

        /* Alternativas de M√∫ltipla Escolha */
        .alternatives-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 20px 0;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .alternative {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .alternative:hover {
            border-color: #667eea;
            background: #f8f9ff;
            transform: translateX(5px);
        }

        .alternative.selected {
            border-color: #667eea;
            background: #e9ecff;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }

        .alternative.correct {
            border-color: #28a745;
            background: #d4edda;
            color: #155724;
        }

        .alternative.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
        }

        .alternative input[type="radio"] {
            width: 18px;
            height: 18px;
            margin: 0;
        }

        .alternative label {
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            margin: 0;
            flex: 1;
        }

        /* √Årea de Exerc√≠cios */
        .exercise-area {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }

        .exercise-problem {
            font-size: 1.3rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }

        .exercise-input {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .input-field {
            padding: 12px 15px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            font-size: 1rem;
            width: 200px;
            text-align: center;
        }

        .input-field:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        /* Bot√µes de A√ß√£o */
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 15px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-warning {
            background: #ffc107;
            color: #333;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        /* Feedback e Resultados */
        .feedback {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-weight: bold;
            text-align: center;
            white-space: pre-line;
        }

        .feedback.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .feedback.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        /* Sistema de Dicas */
        .hints-section {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .hint-item {
            background: white;
            padding: 12px;
            margin: 8px 0;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
        }

        /* √Årea de Teoria */
        .theory-content {
            line-height: 1.6;
        }

        .theory-content h3 {
            color: #667eea;
            margin: 20px 0 10px 0;
        }

        .theory-content p {
            margin-bottom: 15px;
        }

        .formula-box {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .main-nav {
                flex-direction: column;
                align-items: center;
            }

            .tabs {
                flex-direction: column;
            }

            .exercise-input {
                flex-direction: column;
                align-items: center;
            }

            .input-field {
                width: 100%;
                max-width: 300px;
            }

            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
        }

        /* Estados ocultos */
        .hidden {
            display: none !important;
        }

        /* Sistema de Login */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .login-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            max-width: 450px;
            width: 90%;
            text-align: center;
        }

        .login-header {
            margin-bottom: 30px;
        }

        .login-header h2 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.8rem;
        }

        .login-header p {
            color: #666;
            font-size: 1rem;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        .grade-year-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .login-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 25px;
        }

        .btn-login {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary-login {
            background: #667eea;
            color: white;
        }

        .btn-success-login {
            background: #28a745;
            color: white;
        }

        .btn-warning-login {
            background: #ffc107;
            color: #333;
        }

        .btn-secondary-login {
            background: #6c757d;
            color: white;
        }

        .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .login-links {
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 10px;
        }

        .login-link {
            color: #667eea;
            text-decoration: none;
            font-size: 0.9rem;
            cursor: pointer;
        }

        .login-link:hover {
            text-decoration: underline;
        }

        .user-info-bar {
            background: rgba(255,255,255,0.1);
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .user-details {
            font-size: 0.9rem;
        }

        .logout-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .registration-form {
            display: none;
        }

        .professor-login-form {
            display: none;
        }

        .admin-panel {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            color: white;
        }

        .admin-panel h3 {
            margin-bottom: 15px;
            text-align: center;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: bold;
            display: block;
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        /* Ferramentas Administrativas */
        .admin-tools {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .admin-tools h4 {
            color: white;
            margin-bottom: 15px;
            text-align: center;
        }

        .admin-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .admin-buttons .btn {
            padding: 10px 15px;
            font-size: 0.9rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .admin-buttons .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <!-- Sistema de Login -->
    <div id="login-overlay" class="login-overlay">
        <div class="login-container">
            <!-- Login de Aluno -->
            <div id="student-login" class="student-login-form">
                <div class="login-header">
                    <h2>üéì Login do Aluno</h2>
                    <p>Acesse sua conta para estudar matem√°tica</p>
                </div>
                
                <form onsubmit="return studentLogin(event)">
                    <div class="form-group">
                        <label for="student-name">Nome do Aluno:</label>
                        <input type="text" id="student-name" placeholder="Digite seu nome completo" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="student-password">Senha:</label>
                        <input type="password" id="student-password" placeholder="Digite sua senha" required>
                    </div>
                    
                    <div class="grade-year-row">
                        <div class="form-group">
                            <label for="student-grade">S√©rie/Ano:</label>
                            <select id="student-grade" required>
                                <option value="">Selecione</option>
                                <option value="6ano">6¬∫ Ano</option>
                                <option value="7ano">7¬∫ Ano</option>
                                <option value="8ano">8¬∫ Ano</option>
                                <option value="9ano">9¬∫ Ano</option>
                                <option value="1medio">1¬∫ M√©dio</option>
                                <option value="2medio">2¬∫ M√©dio</option>
                                <option value="3medio">3¬∫ M√©dio</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="student-class">Turma:</label>
                            <select id="student-class" required>
                                <option value="">Selecione</option>
                                <option value="A">Turma A</option>
                                <option value="B">Turma B</option>
                                <option value="C">Turma C</option>
                                <option value="D">Turma D</option>
                                <option value="E">Turma E</option>
                                <option value="F">Turma F</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="login-buttons">
                        <button type="submit" class="btn-login btn-primary-login">üöÄ Entrar</button>
                    </div>
                </form>
                
                <div class="login-links">
                    <a class="login-link" onclick="showRegistration()">üìù Cadastrar-se</a>
                    <a class="login-link" onclick="showProfessorLogin()">üë®‚Äçüè´ √Årea do Professor</a>
                </div>
            </div>
            
            <!-- Cadastro de Novo Aluno -->
            <div id="registration-form" class="registration-form">
                <div class="login-header">
                    <h2>üìù Cadastro de Aluno</h2>
                    <p>Crie sua conta para come√ßar a estudar</p>
                </div>
                
                <form onsubmit="return registerStudent(event)">
                    <div class="form-group">
                        <label for="reg-name">Nome Completo:</label>
                        <input type="text" id="reg-name" placeholder="Digite seu nome completo" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="reg-email">Email (opcional):</label>
                        <input type="email" id="reg-email" placeholder="seu@email.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="reg-password">Criar Senha:</label>
                        <input type="password" id="reg-password" placeholder="M√≠nimo 4 caracteres" required minlength="4">
                    </div>
                    
                    <div class="form-group">
                        <label for="reg-confirm-password">Confirmar Senha:</label>
                        <input type="password" id="reg-confirm-password" placeholder="Digite a senha novamente" required>
                    </div>
                    
                    <div class="grade-year-row">
                        <div class="form-group">
                            <label for="reg-grade">S√©rie/Ano:</label>
                            <select id="reg-grade" required>
                                <option value="">Selecione</option>
                                <option value="6ano">6¬∫ Ano</option>
                                <option value="7ano">7¬∫ Ano</option>
                                <option value="8ano">8¬∫ Ano</option>
                                <option value="9ano">9¬∫ Ano</option>
                                <option value="1medio">1¬∫ M√©dio</option>
                                <option value="2medio">2¬∫ M√©dio</option>
                                <option value="3medio">3¬∫ M√©dio</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="reg-class">Turma:</label>
                            <select id="reg-class" required>
                                <option value="">Selecione</option>
                                <option value="A">Turma A</option>
                                <option value="B">Turma B</option>
                                <option value="C">Turma C</option>
                                <option value="D">Turma D</option>
                                <option value="E">Turma E</option>
                                <option value="F">Turma F</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="login-buttons">
                        <button type="submit" class="btn-login btn-success-login">‚úÖ Criar Conta</button>
                        <button type="button" class="btn-login btn-secondary-login" onclick="showStudentLogin()">‚¨ÖÔ∏è Voltar ao Login</button>
                    </div>
                </form>
            </div>
            
            <!-- Login do Professor -->
            <div id="professor-login" class="professor-login-form">
                <div class="login-header">
                    <h2>üë®‚Äçüè´ Login do Professor</h2>
                    <p>Acesso administrativo ao sistema</p>
                </div>
                
                <form onsubmit="return professorLogin(event)">
                    <div class="form-group">
                        <label for="prof-name">Nome do Professor:</label>
                        <input type="text" id="prof-name" placeholder="Digite seu nome" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="prof-password">Senha:</label>
                        <input type="password" id="prof-password" placeholder="Digite sua senha" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="prof-code">C√≥digo de Acesso:</label>
                        <input type="text" id="prof-code" placeholder="C√≥digo administrativo" required>
                    </div>
                    
                    <div class="login-buttons">
                        <button type="submit" class="btn-login btn-warning-login">üîë Entrar como Professor</button>
                        <button type="button" class="btn-login btn-secondary-login" onclick="showStudentLogin()">‚¨ÖÔ∏è Voltar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Barra de Usu√°rio Logado -->
        <div id="user-info-bar" class="user-info-bar hidden">
            <div class="user-details">
                <span id="user-welcome">Bem-vindo(a)!</span>
            </div>
            <button class="logout-btn" onclick="logout()">üö™ Sair</button>
        </div>

        <!-- Painel Administrativo (apenas para professores) -->
        <div id="admin-panel" class="admin-panel hidden">
            <h3>üìä Painel Administrativo</h3>
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number" id="total-students">0</span>
                    <span class="stat-label">Alunos Cadastrados</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="active-sessions">0</span>
                    <span class="stat-label">Sess√µes Ativas</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="exercises-solved">0</span>
                    <span class="stat-label">Exerc√≠cios Resolvidos</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="success-rate">0%</span>
                    <span class="stat-label">Taxa de Acerto</span>
                </div>
            </div>
            
            <!-- Ferramentas Administrativas -->
            <div class="admin-tools">
                <h4>üîß Ferramentas Administrativas</h4>
                <div class="admin-buttons">
                    <button class="btn btn-warning" onclick="clearAllStudents()">üóëÔ∏è Limpar Todos os Alunos</button>
                    <button class="btn btn-secondary" onclick="exportStudentData()">üìä Exportar Dados</button>
                    <button class="btn btn-secondary" onclick="resetStatistics()">üîÑ Resetar Estat√≠sticas</button>
                </div>
            </div>
        </div>
    <div class="container">
        <!-- Cabe√ßalho Principal -->
        <header class="header">
            <h1>üìö Sistema Educativo Completo</h1>
            <p>Equa√ß√µes e Fun√ß√µes - 1¬∞ e 2¬∞ Grau</p>
        </header>

        <!-- Navega√ß√£o Principal -->
        <nav class="main-nav">
            <button class="nav-button active" onclick="showModule('equations')">
                üìê Equa√ß√µes
            </button>
            <button class="nav-button" onclick="showModule('functions')">
                üìà Fun√ß√µes
            </button>
        </nav>

        <!-- Conte√∫do Principal -->
        <main class="main-content">
            <!-- Seletor de Grau -->
            <div class="degree-selector">
                <button class="degree-btn active" onclick="selectDegree(1)">
                    üìù 1¬∞ Grau
                </button>
                <button class="degree-btn" onclick="selectDegree(2)">
                    üìä 2¬∞ Grau
                </button>
            </div>

            <!-- Sistema de Abas -->
            <div class="tabs">
                <button class="tab active" onclick="showTab('theory')">üìö Teoria</button>
                <button class="tab" onclick="showTab('examples')">üí° Exemplos</button>
                <button class="tab" onclick="showTab('practice')">üéØ Pr√°tica</button>
                <button class="tab" onclick="showTab('insert')">‚úèÔ∏è Inserir</button>
                <button class="tab" onclick="showTab('levels')">üéÆ N√≠veis</button>
                <button class="tab" onclick="showTab('graphs')">üìä Gr√°ficos</button>
            </div>

            <!-- Conte√∫do das Abas -->
            
            <!-- Aba Teoria -->
            <div id="theory" class="tab-content active">
                <div class="theory-content">
                    <h2 id="theory-title">Teoria - Equa√ß√µes do 1¬∞ Grau</h2>
                    <div id="theory-text">
                        <h3>üéØ Conceito Fundamental</h3>
                        <p>Uma equa√ß√£o do 1¬∞ grau √© uma igualdade matem√°tica que cont√©m uma inc√≥gnita (geralmente representada por x) elevada √† primeira pot√™ncia.</p>
                        
                        <div class="formula-box">
                            <strong>Forma Geral: ax + b = c</strong>
                        </div>
                        
                        <h3>üìã Identifica√ß√£o dos Coeficientes</h3>
                        <p><strong>a:</strong> coeficiente da vari√°vel x (deve ser diferente de zero)</p>
                        <p><strong>b:</strong> termo independente do lado esquerdo</p>
                        <p><strong>c:</strong> termo independente do lado direito</p>
                        
                        <h3>üîß M√©todo de Resolu√ß√£o</h3>
                        <p><strong>Passo 1:</strong> Identificar os termos da equa√ß√£o</p>
                        <p><strong>Passo 2:</strong> Isolar os termos com x de um lado</p>
                        <p><strong>Passo 3:</strong> Isolar os n√∫meros do outro lado</p>
                        <p><strong>Passo 4:</strong> Dividir ambos os lados pelo coeficiente de x</p>
                        
                        <h3>‚úÖ Verifica√ß√£o da Resposta</h3>
                        <p>Substitua o valor encontrado na equa√ß√£o original e verifique se a igualdade √© verdadeira.</p>
                    </div>
                </div>
            </div>

            <!-- Aba Exemplos -->
            <div id="examples" class="tab-content">
                <h2 id="examples-title">Exemplos - Equa√ß√µes do 1¬∞ Grau</h2>
                <div id="examples-content">
                    <div class="formula-box">
                        <strong>Exemplo 1: 3x + 5 = 14</strong>
                    </div>
                    <p><strong>Passo 1:</strong> 3x = 14 - 5</p>
                    <p><strong>Passo 2:</strong> 3x = 9</p>
                    <p><strong>Passo 3:</strong> x = 9 √∑ 3</p>
                    <p><strong>Resultado:</strong> x = 3</p>
                    <p><strong>Verifica√ß√£o:</strong> 3(3) + 5 = 9 + 5 = 14 ‚úì</p>
                </div>
            </div>

            <!-- Aba Pr√°tica -->
            <div id="practice" class="tab-content">
                <h2>üéØ Pr√°tica - Exerc√≠cios Interativos</h2>
                
                <!-- Quadro de Desempenho -->
                <div class="performance-board">
                    <h3>üìä Quadro de Desempenho</h3>
                    <div class="performance-stats">
                        <div class="stat-item stat-correct">
                            <span class="stat-icon">‚úÖ</span>
                            <div class="stat-details">
                                <span class="stat-number" id="correct-count">0</span>
                                <span class="stat-label">Acertos</span>
                            </div>
                        </div>
                        <div class="stat-item stat-wrong">
                            <span class="stat-icon">‚ùå</span>
                            <div class="stat-details">
                                <span class="stat-number" id="wrong-count">0</span>
                                <span class="stat-label">Erros</span>
                            </div>
                        </div>
                        <div class="stat-item stat-total">
                            <span class="stat-icon">üìù</span>
                            <div class="stat-details">
                                <span class="stat-number" id="total-exercises">0</span>
                                <span class="stat-label">Total</span>
                            </div>
                        </div>
                        <div class="stat-item stat-percentage">
                            <span class="stat-icon">üéØ</span>
                            <div class="stat-details">
                                <span class="stat-number" id="success-percentage">0%</span>
                                <span class="stat-label">Aproveitamento</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Seletor de Tipo de Exerc√≠cio -->
                <div class="exercise-type-selector">
                    <h3>üìö Escolha o Tipo de Exerc√≠cio</h3>
                    <div class="exercise-types">
                        <button class="exercise-type-btn active" onclick="setExerciseType('resolution')" data-type="resolution">
                            üîß Resolu√ß√£o Completa
                        </button>
                        <button class="exercise-type-btn" id="zero-btn" onclick="setExerciseType('zero')" data-type="zero">
                            üéØ Zeros da Fun√ß√£o
                        </button>
                        <button class="exercise-type-btn" id="image-btn" onclick="setExerciseType('image')" data-type="image">
                            üìä C√°lculo de Imagem
                        </button>
                    </div>
                </div>

                <!-- Enunciados Explicativos -->
                <div class="exercise-explanation" id="exercise-explanation">
                    <div class="explanation-content" id="explanation-content">
                        <h4>üîß Resolu√ß√£o Completa</h4>
                        <p>Neste tipo de exerc√≠cio, voc√™ dever√° resolver completamente a equa√ß√£o ou encontrar caracter√≠sticas importantes da fun√ß√£o apresentada.</p>
                    </div>
                </div>
                
                <!-- Seletor de Dificuldade -->
                <div class="difficulty-selector">
                    <button class="difficulty-btn difficulty-easy active" onclick="setDifficulty('easy')">
                        üòä F√°cil
                    </button>
                    <button class="difficulty-btn difficulty-medium" onclick="setDifficulty('medium')">
                        ü§î M√©dio
                    </button>
                    <button class="difficulty-btn difficulty-hard" onclick="setDifficulty('hard')">
                        üî• Dif√≠cil
                    </button>
                </div>

                <!-- √Årea de Exerc√≠cio -->
                <div class="exercise-area">
                    <div class="exercise-problem" id="current-problem">
                        Clique em "Nova Equa√ß√£o" para come√ßar!
                    </div>
                    
                    <!-- Alternativas de M√∫ltipla Escolha -->
                    <div id="alternatives-container" class="alternatives-container hidden">
                        <div class="alternative" onclick="selectAlternative(0)">
                            <input type="radio" name="answer" id="alt-0">
                            <label for="alt-0" id="label-0">Alternativa A</label>
                        </div>
                        <div class="alternative" onclick="selectAlternative(1)">
                            <input type="radio" name="answer" id="alt-1">
                            <label for="alt-1" id="label-1">Alternativa B</label>
                        </div>
                        <div class="alternative" onclick="selectAlternative(2)">
                            <input type="radio" name="answer" id="alt-2">
                            <label for="alt-2" id="label-2">Alternativa C</label>
                        </div>
                        <div class="alternative" onclick="selectAlternative(3)">
                            <input type="radio" name="answer" id="alt-3">
                            <label for="alt-3" id="label-3">Alternativa D</label>
                        </div>
                        <div class="alternative" onclick="selectAlternative(4)">
                            <input type="radio" name="answer" id="alt-4">
                            <label for="alt-4" id="label-4">Alternativa E</label>
                        </div>
                    </div>
                    
                    <!-- Campo de resposta aberta (como op√ß√£o) -->
                    <div class="exercise-input">
                        <input type="text" class="input-field hidden" id="answer-input" placeholder="Digite sua resposta" onkeypress="checkEnter(event)">
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="generateProblem()">üîÑ Nova Equa√ß√£o</button>
                        <button class="btn btn-success" onclick="checkAnswer()">‚úîÔ∏è Verificar</button>
                        <button class="btn btn-warning" onclick="showHint()">üí° Dica</button>
                        <button class="btn btn-secondary" onclick="showSolution()">üìñ Ver Solu√ß√£o</button>
                        <button class="btn btn-secondary" onclick="toggleAnswerMode()">üî§ Modo Resposta</button>
                    </div>
                </div>

                <!-- Feedback -->
                <div id="feedback" class="feedback hidden"></div>

                <!-- Sistema de Dicas -->
                <div id="hints" class="hints-section hidden">
                    <h3>üí° Dicas Progressivas</h3>
                    <div id="hints-list"></div>
                </div>
            </div>

            <!-- Aba Inserir -->
            <div id="insert" class="tab-content">
                <h2>‚úèÔ∏è Inserir Equa√ß√£o Personalizada</h2>
                <div class="exercise-area">
                    <p>Digite sua pr√≥pria equa√ß√£o para resolver:</p>
                    <div class="exercise-input">
                        <input type="text" class="input-field" id="custom-equation" placeholder="Ex: 2x + 3 = 7">
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="solveCustomEquation()">üîß Resolver</button>
                        <button class="btn btn-secondary" onclick="clearCustom()">üóëÔ∏è Limpar</button>
                    </div>
                    <div id="custom-solution" class="feedback hidden"></div>
                </div>
            </div>

            <!-- Aba N√≠veis -->
            <div id="levels" class="tab-content">
                <h2>üéÆ Sistema de N√≠veis</h2>
                <div class="theory-content">
                    <h3>üòä N√≠vel F√°cil (Verde)</h3>
                    <p>‚Ä¢ Coeficientes inteiros pequenos (1 a 10)</p>
                    <p>‚Ä¢ Sem fra√ß√µes nas equa√ß√µes</p>
                    <p>‚Ä¢ Solu√ß√µes sempre inteiras</p>
                    <p>‚Ä¢ Exemplo: 2x + 4 = 10</p>
                    
                    <h3>ü§î N√≠vel M√©dio (Amarelo)</h3>
                    <p>‚Ä¢ Coeficientes at√© 50</p>
                    <p>‚Ä¢ Introdu√ß√£o de fra√ß√µes simples</p>
                    <p>‚Ä¢ Solu√ß√µes podem ser decimais</p>
                    <p>‚Ä¢ Exemplo: 3x/2 - 1 = 7</p>
                    
                    <h3>üî• N√≠vel Dif√≠cil (Vermelho)</h3>
                    <p>‚Ä¢ Coeficientes grandes e variados</p>
                    <p>‚Ä¢ Fra√ß√µes complexas</p>
                    <p>‚Ä¢ N√∫meros negativos frequentes</p>
                    <p>‚Ä¢ Exemplo: 2x/3 - 5/6 = 7x/4 + 1/12</p>
                </div>
            </div>

            <!-- Aba Gr√°ficos -->
            <div id="graphs" class="tab-content">
                <h2>üìä Visualiza√ß√£o Gr√°fica</h2>
                <div class="exercise-area">
                    <p style="text-align: center; color: #666;">
                        üìà Os gr√°ficos interativos ser√£o exibidos aqui para visualizar as fun√ß√µes e seus comportamentos matem√°ticos.
                    </p>
                    <br>
                    <p style="text-align: center; color: #888;">
                        üîß Funcionalidade em desenvolvimento - Dispon√≠vel em breve!
                    </p>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Estado global da aplica√ß√£o
        let currentModule = 'equations'; // 'equations' ou 'functions'
        let currentDegree = 1; // 1 ou 2
        let currentDifficulty = 'easy'; // 'easy', 'medium', 'hard'
        let currentExerciseType = 'resolution'; // 'resolution', 'zero', 'image'
        let currentProblem = null;
        let hintCount = 0;
        let answerMode = 'alternatives'; // 'alternatives' ou 'open'
        let selectedAlternative = -1;
        let correctAlternative = -1;

        // Sistema de Desempenho
        let performanceStats = {
            correct: 0,
            wrong: 0,
            total: 0,
            percentage: 0
        };

        // Sistema de Usu√°rios
        let currentUser = null;
        let isLoggedIn = false;
        let userType = 'student'; // 'student' ou 'professor'
        let sessionStats = {
            exercisesSolved: 0,
            correctAnswers: 0,
            startTime: null
        };

        // Banco de Dados Local (localStorage)
        const DB = {
            students: 'math_students_db',
            professors: 'math_professors_db',
            sessions: 'math_sessions_db',
            stats: 'math_stats_db'
        };

        // Inicializar banco de dados
        function initDatabase() {
            // Criar professores padr√£o se n√£o existirem
            if (!localStorage.getItem(DB.professors)) {
                const defaultProfessors = [
                    {
                        id: 1,
                        name: 'Professor Demo',
                        password: 'prof123',
                        code: 'ADMIN2024',
                        email: 'professor@escola.com',
                        createdAt: new Date().toISOString()
                    }
                ];
                localStorage.setItem(DB.professors, JSON.stringify(defaultProfessors));
            }

            // Inicializar outras cole√ß√µes se n√£o existirem
            if (!localStorage.getItem(DB.students)) {
                localStorage.setItem(DB.students, JSON.stringify([]));
            }
            if (!localStorage.getItem(DB.sessions)) {
                localStorage.setItem(DB.sessions, JSON.stringify([]));
            }
            if (!localStorage.getItem(DB.stats)) {
                localStorage.setItem(DB.stats, JSON.stringify({
                    totalExercises: 0,
                    totalCorrect: 0,
                    totalStudents: 0,
                    activeSessions: 0
                }));
            }
        }

        // Fun√ß√µes de manipula√ß√£o do banco
        function getStudents() {
            return JSON.parse(localStorage.getItem(DB.students) || '[]');
        }

        function saveStudent(student) {
            const students = getStudents();
            student.id = Date.now();
            student.createdAt = new Date().toISOString();
            students.push(student);
            localStorage.setItem(DB.students, JSON.stringify(students));
            return student;
        }

        function findStudent(name, password) {
            const students = getStudents();
            return students.find(s => s.name.toLowerCase() === name.toLowerCase() && s.password === password);
        }

        function getProfessors() {
            return JSON.parse(localStorage.getItem(DB.professors) || '[]');
        }

        function findProfessor(name, password, code) {
            const professors = getProfessors();
            return professors.find(p => 
                p.name.toLowerCase() === name.toLowerCase() && 
                p.password === password && 
                p.code === code
            );
        }

        function updateStats() {
            const stats = JSON.parse(localStorage.getItem(DB.stats) || '{}');
            stats.totalStudents = getStudents().length;
            stats.totalExercises = sessionStats.exercisesSolved || 0;
            stats.totalCorrect = sessionStats.correctAnswers || 0;
            stats.activeSessions = 1; // Simplificado para demo
            localStorage.setItem(DB.stats, JSON.stringify(stats));
            
            // Atualizar painel administrativo
            if (userType === 'professor') {
                updateAdminPanel();
            }
        }

        // Fun√ß√µes de Login
        function studentLogin(event) {
            event.preventDefault();
            
            const name = document.getElementById('student-name').value.trim();
            const password = document.getElementById('student-password').value;
            const grade = document.getElementById('student-grade').value;
            const classRoom = document.getElementById('student-class').value;
            
            if (!name || !password || !grade || !classRoom) {
                alert('Por favor, preencha todos os campos!');
                return false;
            }
            
            const student = findStudent(name, password);
            
            if (student) {
                // Login bem-sucedido
                currentUser = student;
                isLoggedIn = true;
                userType = 'student';
                sessionStats.startTime = new Date();
                
                showMainSystem();
                updateUserInfo();
                updateStats();
            } else {
                alert('Nome ou senha incorretos!\\nSe √© seu primeiro acesso, clique em "Cadastrar-se".');
            }
            
            return false;
        }

        function registerStudent(event) {
            event.preventDefault();
            
            const name = document.getElementById('reg-name').value.trim();
            const email = document.getElementById('reg-email').value.trim();
            const password = document.getElementById('reg-password').value;
            const confirmPassword = document.getElementById('reg-confirm-password').value;
            const grade = document.getElementById('reg-grade').value;
            const classRoom = document.getElementById('reg-class').value;
            
            if (!name || !password || !grade || !classRoom) {
                alert('Por favor, preencha todos os campos obrigat√≥rios!');
                return false;
            }
            
            if (password !== confirmPassword) {
                alert('As senhas n√£o coincidem!');
                return false;
            }
            
            if (password.length < 4) {
                alert('A senha deve ter pelo menos 4 caracteres!');
                return false;
            }
            
            // Verificar se j√° existe um aluno com esse nome
            const existingStudent = getStudents().find(s => s.name.toLowerCase() === name.toLowerCase());
            if (existingStudent) {
                alert('J√° existe um aluno cadastrado com este nome!');
                return false;
            }
            
            // Criar novo aluno
            const newStudent = {
                name: name,
                email: email,
                password: password,
                grade: grade,
                class: classRoom
            };
            
            saveStudent(newStudent);
            alert('Cadastro realizado com sucesso!\\nAgora voc√™ pode fazer login.');
            showStudentLogin();
            
            return false;
        }

        function professorLogin(event) {
            event.preventDefault();
            
            const name = document.getElementById('prof-name').value.trim();
            const password = document.getElementById('prof-password').value;
            const code = document.getElementById('prof-code').value;
            
            if (!name || !password || !code) {
                alert('Por favor, preencha todos os campos!');
                return false;
            }
            
            const professor = findProfessor(name, password, code);
            
            if (professor) {
                // Login bem-sucedido
                currentUser = professor;
                isLoggedIn = true;
                userType = 'professor';
                sessionStats.startTime = new Date();
                
                showMainSystem();
                updateUserInfo();
                updateStats();
                document.getElementById('admin-panel').classList.remove('hidden');
            } else {
                alert('Credenciais de professor incorretas!\\n\\nPara demonstra√ß√£o, use:\\nNome: Professor Demo\\nSenha: prof123\\nC√≥digo: ADMIN2024');
            }
            
            return false;
        }

        // Fun√ß√µes de interface
        function showStudentLogin() {
            document.getElementById('student-login').style.display = 'block';
            document.getElementById('registration-form').style.display = 'none';
            document.getElementById('professor-login').style.display = 'none';
        }

        function showRegistration() {
            document.getElementById('student-login').style.display = 'none';
            document.getElementById('registration-form').style.display = 'block';
            document.getElementById('professor-login').style.display = 'none';
        }

        function showProfessorLogin() {
            document.getElementById('student-login').style.display = 'none';
            document.getElementById('registration-form').style.display = 'none';
            document.getElementById('professor-login').style.display = 'block';
        }

        function showMainSystem() {
            document.getElementById('login-overlay').classList.add('hidden');
            document.getElementById('user-info-bar').classList.remove('hidden');
        }

        function updateUserInfo() {
            const gradeNames = {
                '6ano': '6¬∫ Ano',
                '7ano': '7¬∫ Ano', 
                '8ano': '8¬∫ Ano',
                '9ano': '9¬∫ Ano',
                '1medio': '1¬∫ M√©dio',
                '2medio': '2¬∫ M√©dio',
                '3medio': '3¬∫ M√©dio'
            };
            
            let welcomeText = '';
            if (userType === 'student') {
                const grade = gradeNames[currentUser.grade] || currentUser.grade;
                welcomeText = `Ol√°, ${currentUser.name}! | ${grade} - Turma ${currentUser.class}`;
            } else {
                welcomeText = `Professor ${currentUser.name} | Painel Administrativo`;
            }
            
            document.getElementById('user-welcome').textContent = welcomeText;
        }

        function updateAdminPanel() {
            const stats = JSON.parse(localStorage.getItem(DB.stats) || '{}');
            const students = getStudents();
            
            document.getElementById('total-students').textContent = students.length;
            document.getElementById('active-sessions').textContent = '1';
            document.getElementById('exercises-solved').textContent = sessionStats.exercisesSolved;
            
            const successRate = sessionStats.exercisesSolved > 0 ? 
                Math.round((sessionStats.correctAnswers / sessionStats.exercisesSolved) * 100) : 0;
            document.getElementById('success-rate').textContent = successRate + '%';
        }

        function logout() {
            if (confirm('Tem certeza que deseja sair?')) {
                currentUser = null;
                isLoggedIn = false;
                userType = 'student';
                sessionStats = {
                    exercisesSolved: 0,
                    correctAnswers: 0,
                    startTime: null
                };
                
                document.getElementById('login-overlay').classList.remove('hidden');
                document.getElementById('user-info-bar').classList.add('hidden');
                document.getElementById('admin-panel').classList.add('hidden');
                showStudentLogin();
                
                // Limpar formul√°rios
                document.querySelectorAll('form').forEach(form => form.reset());
            }
        }

        // Navega√ß√£o entre m√≥dulos
        function showModule(module) {
            currentModule = module;
            
            // Atualizar bot√µes de navega√ß√£o
            document.querySelectorAll('.nav-button').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Controlar visibilidade dos tipos de exerc√≠cio
            updateExerciseTypeVisibility();
            
            // Atualizar conte√∫do baseado no m√≥dulo
            updateContent();
        }

        // Controlar visibilidade dos tipos de exerc√≠cio
        function updateExerciseTypeVisibility() {
            const zeroBtn = document.getElementById('zero-btn');
            const imageBtn = document.getElementById('image-btn');
            
            if (currentModule === 'functions') {
                // Mostrar todos os tipos quando for m√≥dulo Fun√ß√µes
                zeroBtn.style.display = 'block';
                imageBtn.style.display = 'block';
            } else {
                // Esconder zeros e imagem quando for m√≥dulo Equa√ß√µes
                zeroBtn.style.display = 'none';
                imageBtn.style.display = 'none';
                
                // Se estava selecionado zero ou image, voltar para resolution
                if (currentExerciseType === 'zero' || currentExerciseType === 'image') {
                    setExerciseType('resolution');
                }
            }
        }

        // Sele√ß√£o de grau
        function selectDegree(degree) {
            currentDegree = degree;
            
            // Atualizar bot√µes de grau
            document.querySelectorAll('.degree-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Atualizar conte√∫do baseado no grau
            updateContent();
        }

        // Selecionar tipo de exerc√≠cio
        function setExerciseType(type) {
            currentExerciseType = type;
            
            // Atualizar bot√µes
            document.querySelectorAll('.exercise-type-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-type="${type}"]`).classList.add('active');
            
            // Atualizar enunciado explicativo
            updateExerciseExplanation();
        }

        // Atualizar enunciado explicativo
        function updateExerciseExplanation() {
            const explanationContent = document.getElementById('explanation-content');
            let title, description;
            
            if (currentModule === 'equations') {
                // Para equa√ß√µes, sempre usar resolution (j√° que zero e image s√≥ aparecem em fun√ß√µes)
                title = currentDegree === 1 ? 'üîß Resolu√ß√£o de Equa√ß√µes do 1¬∞ Grau' : 'üîß Resolu√ß√£o de Equa√ß√µes do 2¬∞ Grau';
                description = currentDegree === 1 ? 
                    'Neste exerc√≠cio, voc√™ deve encontrar o valor de x que torna a equa√ß√£o verdadeira. Use as opera√ß√µes inversas para isolar a vari√°vel.' :
                    'Resolva a equa√ß√£o do 2¬∞ grau usando a f√≥rmula de Bhaskara ou fatora√ß√£o. Encontre os valores de x que satisfazem a equa√ß√£o.';
            } else { // functions
                switch(currentExerciseType) {
                    case 'resolution':
                        title = currentDegree === 1 ? 'üìà An√°lise de Fun√ß√µes do 1¬∞ Grau' : 'üìà An√°lise de Fun√ß√µes do 2¬∞ Grau';
                        description = currentDegree === 1 ? 
                            'Analise as caracter√≠sticas da fun√ß√£o linear: coeficientes, crescimento/decrescimento, ponto onde cruza os eixos.' :
                            'Estude as propriedades da fun√ß√£o quadr√°tica: v√©rtice, eixo de simetria, concavidade e pontos importantes.';
                        break;
                    case 'zero':
                        title = 'üéØ Zeros da Fun√ß√£o';
                        description = 'Encontre onde a fun√ß√£o intercepta o eixo x. Para fun√ß√µes do 1¬∞ grau h√° um zero, para do 2¬∞ grau pode haver 0, 1 ou 2 zeros.';
                        break;
                    case 'image':
                        title = 'üìä C√°lculo de Imagem';
                        description = 'Calcule f(x) para valores dados. Exemplo: se f(x) = 2x + 3 e queremos f(5), calculamos f(5) = 2(5) + 3 = 13.';
                        break;
                }
            }
            
            explanationContent.innerHTML = `
                <h4>${title}</h4>
                <p>${description}</p>
            `;
        }

        // Atualizar quadro de desempenho
        function updatePerformanceBoard() {
            document.getElementById('correct-count').textContent = performanceStats.correct;
            document.getElementById('wrong-count').textContent = performanceStats.wrong;
            document.getElementById('total-exercises').textContent = performanceStats.total;
            
            if (performanceStats.total > 0) {
                performanceStats.percentage = Math.round((performanceStats.correct / performanceStats.total) * 100);
            } else {
                performanceStats.percentage = 0;
            }
            
            document.getElementById('success-percentage').textContent = performanceStats.percentage + '%';
        }

        // Registrar resposta no desempenho
        function recordAnswer(isCorrect) {
            if (isCorrect) {
                performanceStats.correct++;
                sessionStats.correctAnswers++;
            } else {
                performanceStats.wrong++;
            }
            performanceStats.total++;
            sessionStats.exercisesSolved++;
            
            updatePerformanceBoard();
            updateStats();
        }

        // Navega√ß√£o entre abas
        function showTab(tab) {
            // Esconder todas as abas
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remover classe active de todas as abas
            document.querySelectorAll('.tab').forEach(tabBtn => {
                tabBtn.classList.remove('active');
            });
            
            // Mostrar aba selecionada
            document.getElementById(tab).classList.add('active');
            event.target.classList.add('active');
        }

        // Atualizar conte√∫do baseado no m√≥dulo e grau atual
        function updateContent() {
            const isEquations = currentModule === 'equations';
            const isDegree1 = currentDegree === 1;
            
            // Atualizar t√≠tulos
            const theoryTitle = document.getElementById('theory-title');
            const examplesTitle = document.getElementById('examples-title');
            
            if (isEquations) {
                if (isDegree1) {
                    theoryTitle.textContent = 'Teoria - Equa√ß√µes do 1¬∞ Grau';
                    examplesTitle.textContent = 'Exemplos - Equa√ß√µes do 1¬∞ Grau';
                    updateTheoryEquations1();
                    updateExamplesEquations1();
                } else {
                    theoryTitle.textContent = 'Teoria - Equa√ß√µes do 2¬∞ Grau';
                    examplesTitle.textContent = 'Exemplos - Equa√ß√µes do 2¬∞ Grau';
                    updateTheoryEquations2();
                    updateExamplesEquations2();
                }
            } else {
                if (isDegree1) {
                    theoryTitle.textContent = 'Teoria - Fun√ß√µes do 1¬∞ Grau';
                    examplesTitle.textContent = 'Exemplos - Fun√ß√µes do 1¬∞ Grau';
                    updateTheoryFunctions1();
                    updateExamplesFunctions1();
                } else {
                    theoryTitle.textContent = 'Teoria - Fun√ß√µes do 2¬∞ Grau';
                    examplesTitle.textContent = 'Exemplos - Fun√ß√µes do 2¬∞ Grau';
                    updateTheoryFunctions2();
                    updateExamplesFunctions2();
                }
            }
        }

        // Atualizar teoria de equa√ß√µes do 1¬∞ grau
        function updateTheoryEquations1() {
            const theoryText = document.getElementById('theory-text');
            theoryText.innerHTML = `
                <h3>üéØ Conceito Fundamental</h3>
                <p>Uma equa√ß√£o do 1¬∞ grau √© uma igualdade matem√°tica que cont√©m uma inc√≥gnita (geralmente representada por x) elevada √† primeira pot√™ncia.</p>
                
                <div class="formula-box">
                    <strong>Forma Geral: ax + b = c</strong>
                </div>
                
                <h3>üìã Identifica√ß√£o dos Coeficientes</h3>
                <p><strong>a:</strong> coeficiente da vari√°vel x (deve ser diferente de zero)</p>
                <p><strong>b:</strong> termo independente do lado esquerdo</p>
                <p><strong>c:</strong> termo independente do lado direito</p>
                
                <h3>üîß M√©todo de Resolu√ß√£o</h3>
                <p><strong>Passo 1:</strong> Identificar os termos da equa√ß√£o</p>
                <p><strong>Passo 2:</strong> Isolar os termos com x de um lado</p>
                <p><strong>Passo 3:</strong> Isolar os n√∫meros do outro lado</p>
                <p><strong>Passo 4:</strong> Dividir ambos os lados pelo coeficiente de x</p>
                
                <h3>‚úÖ Verifica√ß√£o da Resposta</h3>
                <p>Substitua o valor encontrado na equa√ß√£o original e verifique se a igualdade √© verdadeira.</p>
            `;
        }

        // Atualizar teoria de equa√ß√µes do 2¬∞ grau
        function updateTheoryEquations2() {
            const theoryText = document.getElementById('theory-text');
            theoryText.innerHTML = `
                <h3>üéØ Conceito Fundamental</h3>
                <p>Uma equa√ß√£o do 2¬∞ grau √© uma equa√ß√£o com x¬≤ como maior pot√™ncia da inc√≥gnita.</p>
                
                <div class="formula-box">
                    <strong>Forma Padr√£o: ax¬≤ + bx + c = 0</strong>
                </div>
                
                <h3>üìã Identifica√ß√£o dos Coeficientes</h3>
                <p><strong>a:</strong> coeficiente de x¬≤ (deve ser diferente de zero)</p>
                <p><strong>b:</strong> coeficiente de x</p>
                <p><strong>c:</strong> termo independente</p>
                
                <h3>üîß F√≥rmula de Bhaskara</h3>
                <div class="formula-box">
                    <strong>x = (-b ¬± ‚àöŒî) / 2a</strong><br>
                    <strong>Œî = b¬≤ - 4ac</strong>
                </div>
                
                <h3>üìä An√°lise do Discriminante (Œî)</h3>
                <p><strong>Œî > 0:</strong> duas solu√ß√µes reais distintas</p>
                <p><strong>Œî = 0:</strong> uma solu√ß√£o real (raiz dupla)</p>
                <p><strong>Œî < 0:</strong> sem solu√ß√µes reais</p>
            `;
        }

        // Atualizar teoria de fun√ß√µes do 1¬∞ grau
        function updateTheoryFunctions1() {
            const theoryText = document.getElementById('theory-text');
            theoryText.innerHTML = `
                <h3>üéØ Conceito de Fun√ß√£o</h3>
                <p>Uma fun√ß√£o do 1¬∞ grau relaciona cada valor de x a um √∫nico valor de f(x) atrav√©s de uma express√£o linear.</p>
                
                <div class="formula-box">
                    <strong>f(x) = ax + b</strong>
                </div>
                
                <h3>üìã Elementos da Fun√ß√£o</h3>
                <p><strong>a:</strong> coeficiente angular (determina a inclina√ß√£o)</p>
                <p><strong>b:</strong> coeficiente linear (ponto onde a reta corta o eixo y)</p>
                
                <h3>üìà Comportamento da Fun√ß√£o</h3>
                <p><strong>Se a > 0:</strong> fun√ß√£o crescente</p>
                <p><strong>Se a < 0:</strong> fun√ß√£o decrescente</p>
                
                <h3>üéØ Zero da Fun√ß√£o</h3>
                <p>Valor de x onde f(x) = 0</p>
                <div class="formula-box">
                    <strong>x = -b/a</strong>
                </div>
            `;
        }

        // Atualizar teoria de fun√ß√µes do 2¬∞ grau
        function updateTheoryFunctions2() {
            const theoryText = document.getElementById('theory-text');
            theoryText.innerHTML = `
                <h3>üéØ Conceito de Fun√ß√£o Quadr√°tica</h3>
                <p>Uma fun√ß√£o do 2¬∞ grau representa uma par√°bola no plano cartesiano.</p>
                
                <div class="formula-box">
                    <strong>f(x) = ax¬≤ + bx + c</strong>
                </div>
                
                <h3>üìã Elementos da Fun√ß√£o</h3>
                <p><strong>a:</strong> determina a concavidade (a > 0: para cima, a < 0: para baixo)</p>
                <p><strong>b:</strong> coeficiente de x</p>
                <p><strong>c:</strong> termo independente (ponto onde a par√°bola corta o eixo y)</p>
                
                <h3>üéØ V√©rtice da Par√°bola</h3>
                <div class="formula-box">
                    <strong>V(-b/2a, -Œî/4a)</strong>
                </div>
                
                <h3>üìä Zeros da Fun√ß√£o</h3>
                <p>Pontos onde a par√°bola corta o eixo x, calculados pela f√≥rmula de Bhaskara.</p>
            `;
        }

        // Atualizar exemplos para cada tipo
        function updateExamplesEquations1() {
            const examplesContent = document.getElementById('examples-content');
            examplesContent.innerHTML = `
                <div class="formula-box">
                    <strong>Exemplo 1: 3x + 5 = 14</strong>
                </div>
                <p><strong>Passo 1:</strong> 3x = 14 - 5</p>
                <p><strong>Passo 2:</strong> 3x = 9</p>
                <p><strong>Passo 3:</strong> x = 9 √∑ 3</p>
                <p><strong>Resultado:</strong> x = 3</p>
                <p><strong>Verifica√ß√£o:</strong> 3(3) + 5 = 9 + 5 = 14 ‚úì</p>
                
                <div class="formula-box">
                    <strong>Exemplo 2: 2x - 7 = 15</strong>
                </div>
                <p><strong>Passo 1:</strong> 2x = 15 + 7</p>
                <p><strong>Passo 2:</strong> 2x = 22</p>
                <p><strong>Passo 3:</strong> x = 22 √∑ 2</p>
                <p><strong>Resultado:</strong> x = 11</p>
            `;
        }

        function updateExamplesEquations2() {
            const examplesContent = document.getElementById('examples-content');
            examplesContent.innerHTML = `
                <div class="formula-box">
                    <strong>Exemplo: x¬≤ - 5x + 6 = 0</strong>
                </div>
                <p><strong>Identifica√ß√£o:</strong> a = 1, b = -5, c = 6</p>
                <p><strong>Discriminante:</strong> Œî = (-5)¬≤ - 4(1)(6) = 25 - 24 = 1</p>
                <p><strong>Como Œî > 0:</strong> duas solu√ß√µes reais</p>
                <p><strong>Bhaskara:</strong> x = (5 ¬± ‚àö1) / 2</p>
                <p><strong>x‚ÇÅ = (5 + 1) / 2 = 3</strong></p>
                <p><strong>x‚ÇÇ = (5 - 1) / 2 = 2</strong></p>
                <p><strong>Solu√ß√µes:</strong> x = 2 ou x = 3</p>
            `;
        }

        function updateExamplesFunctions1() {
            const examplesContent = document.getElementById('examples-content');
            examplesContent.innerHTML = `
                <div class="formula-box">
                    <strong>Exemplo: f(x) = 2x + 3</strong>
                </div>
                <p><strong>Coeficiente angular:</strong> a = 2 (fun√ß√£o crescente)</p>
                <p><strong>Coeficiente linear:</strong> b = 3</p>
                <p><strong>Zero da fun√ß√£o:</strong> 2x + 3 = 0 ‚Üí x = -3/2</p>
                <p><strong>f(0) =</strong> 2(0) + 3 = 3</p>
                <p><strong>f(1) =</strong> 2(1) + 3 = 5</p>
                <p><strong>f(-1) =</strong> 2(-1) + 3 = 1</p>
            `;
        }

        function updateExamplesFunctions2() {
            const examplesContent = document.getElementById('examples-content');
            examplesContent.innerHTML = `
                <div class="formula-box">
                    <strong>Exemplo: f(x) = x¬≤ - 4x + 3</strong>
                </div>
                <p><strong>Coeficientes:</strong> a = 1, b = -4, c = 3</p>
                <p><strong>Concavidade:</strong> para cima (a > 0)</p>
                <p><strong>V√©rtice:</strong> x = -(-4)/2(1) = 2</p>
                <p><strong>f(2) =</strong> 2¬≤ - 4(2) + 3 = -1</p>
                <p><strong>V√©rtice:</strong> V(2, -1)</p>
                <p><strong>Zeros:</strong> x¬≤ - 4x + 3 = 0 ‚Üí x = 1 ou x = 3</p>
            `;
        }

        // Configurar dificuldade
        function setDifficulty(difficulty) {
            currentDifficulty = difficulty;
            
            // Atualizar bot√µes de dificuldade
            document.querySelectorAll('.difficulty-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Resetar dicas
            hintCount = 0;
            document.getElementById('hints').classList.add('hidden');
        }

        // Gerar novo problema
        function generateProblem() {
            hintCount = 0;
            selectedAlternative = -1;
            correctAlternative = -1;
            document.getElementById('hints').classList.add('hidden');
            document.getElementById('feedback').classList.add('hidden');
            document.getElementById('answer-input').value = '';
            document.getElementById('hints-list').innerHTML = '';
            
            // Limpar sele√ß√µes anteriores
            document.querySelectorAll('.alternative').forEach(alt => {
                alt.classList.remove('selected', 'correct', 'incorrect');
                alt.querySelector('input').checked = false;
            });
            
            // Gerar problema baseado no m√≥dulo, grau e tipo de exerc√≠cio
            if (currentModule === 'equations') {
                if (currentExerciseType === 'resolution') {
                    if (currentDegree === 1) {
                        currentProblem = generateEquation1();
                    } else {
                        currentProblem = generateEquation2();
                    }
                } else if (currentExerciseType === 'zero') {
                    // Para zeros, gerar fun√ß√£o e pedir o zero
                    if (currentDegree === 1) {
                        currentProblem = generateFunctionZero1();
                    } else {
                        currentProblem = generateFunctionZero2();
                    }
                } else if (currentExerciseType === 'image') {
                    // Para imagem, gerar fun√ß√£o e pedir f(valor)
                    if (currentDegree === 1) {
                        currentProblem = generateFunctionImage1();
                    } else {
                        currentProblem = generateFunctionImage2();
                    }
                }
            } else { // functions
                if (currentExerciseType === 'resolution') {
                    if (currentDegree === 1) {
                        currentProblem = generateFunction1();
                    } else {
                        currentProblem = generateFunction2();
                    }
                } else if (currentExerciseType === 'zero') {
                    if (currentDegree === 1) {
                        currentProblem = generateFunctionZero1();
                    } else {
                        currentProblem = generateFunctionZero2();
                    }
                } else if (currentExerciseType === 'image') {
                    if (currentDegree === 1) {
                        currentProblem = generateFunctionImage1();
                    } else {
                        currentProblem = generateFunctionImage2();
                    }
                }
            }
            
            document.getElementById('current-problem').innerHTML = currentProblem.display;
            
            // Gerar alternativas se estiver no modo alternativas
            if (answerMode === 'alternatives') {
                generateAlternatives();
            }
        }

        // Gerar alternativas m√∫ltipla escolha
        function generateAlternatives() {
            const alternatives = [];
            let correctAnswer;
            
            // Definir resposta correta baseada no tipo de problema
            if (currentProblem.type === 'equation1') {
                correctAnswer = currentProblem.solution;
            } else if (currentProblem.type === 'equation2') {
                if (currentProblem.solutions.length === 0) {
                    correctAnswer = "N√£o h√° solu√ß√µes reais";
                } else if (currentProblem.solutions.length === 1) {
                    correctAnswer = currentProblem.solutions[0];
                } else {
                    correctAnswer = `x = ${currentProblem.solutions[0]} ou x = ${currentProblem.solutions[1]}`;
                }
            } else if (currentProblem.type === 'function1') {
                correctAnswer = currentProblem.zero;
            } else if (currentProblem.type === 'function2') {
                correctAnswer = `V(${currentProblem.vertex.x}, ${currentProblem.vertex.y})`;
            } else if (currentProblem.type === 'functionZero1') {
                correctAnswer = currentProblem.solution;
            } else if (currentProblem.type === 'functionZero2') {
                if (currentProblem.solutions.length === 0) {
                    correctAnswer = "N√£o h√° zeros reais";
                } else if (currentProblem.solutions.length === 1) {
                    correctAnswer = `x = ${currentProblem.solutions[0]}`;
                } else {
                    correctAnswer = `x = ${currentProblem.solutions[0]} e x = ${currentProblem.solutions[1]}`;
                }
            } else if (currentProblem.type === 'functionImage1' || currentProblem.type === 'functionImage2') {
                correctAnswer = currentProblem.solution;
            }
            
            alternatives.push(correctAnswer);
            
            // Gerar alternativas incorretas
            while (alternatives.length < 5) {
                let wrongAnswer;
                
                if (currentProblem.type === 'equation1' || currentProblem.type === 'function1' || 
                    currentProblem.type === 'functionZero1' || currentProblem.type === 'functionImage1' || 
                    currentProblem.type === 'functionImage2') {
                    const variation = (Math.random() - 0.5) * 10;
                    wrongAnswer = Math.round((correctAnswer + variation) * 100) / 100;
                    if (wrongAnswer !== correctAnswer && !alternatives.includes(wrongAnswer)) {
                        alternatives.push(wrongAnswer);
                    }
                } else if (currentProblem.type === 'equation2') {
                    if (currentProblem.solutions.length === 0) {
                        const wrongOptions = ["x = 0", "x = 1", "x = -1", "x = 2"];
                        const wrongAnswer = wrongOptions[Math.floor(Math.random() * wrongOptions.length)];
                        if (!alternatives.includes(wrongAnswer)) {
                            alternatives.push(wrongAnswer);
                        }
                    } else {
                        const variation = (Math.random() - 0.5) * 6;
                        const wrongX1 = Math.round((currentProblem.solutions[0] + variation) * 100) / 100;
                        const wrongX2 = Math.round((currentProblem.solutions[1] + variation) * 100) / 100;
                        const wrongAnswer = currentProblem.solutions.length === 1 ? wrongX1 : `x = ${wrongX1} ou x = ${wrongX2}`;
                        if (!alternatives.includes(wrongAnswer)) {
                            alternatives.push(wrongAnswer);
                        }
                    }
                } else if (currentProblem.type === 'functionZero2') {
                    if (currentProblem.solutions.length === 0) {
                        const wrongOptions = ["x = 0", "x = 1 e x = -1", "x = 2 e x = -2", "x = 0.5"];
                        const wrongAnswer = wrongOptions[Math.floor(Math.random() * wrongOptions.length)];
                        if (!alternatives.includes(wrongAnswer)) {
                            alternatives.push(wrongAnswer);
                        }
                    } else {
                        const variation = (Math.random() - 0.5) * 4;
                        const wrongX1 = Math.round((currentProblem.solutions[0] + variation) * 100) / 100;
                        const wrongX2 = currentProblem.solutions.length > 1 ? 
                            Math.round((currentProblem.solutions[1] + variation) * 100) / 100 : wrongX1;
                        const wrongAnswer = currentProblem.solutions.length === 1 ? 
                            `x = ${wrongX1}` : `x = ${wrongX1} e x = ${wrongX2}`;
                        if (!alternatives.includes(wrongAnswer)) {
                            alternatives.push(wrongAnswer);
                        }
                    }
                } else if (currentProblem.type === 'function2') {
                    const wrongX = Math.round((currentProblem.vertex.x + (Math.random() - 0.5) * 4) * 100) / 100;
                    const wrongY = Math.round((currentProblem.vertex.y + (Math.random() - 0.5) * 4) * 100) / 100;
                    const wrongAnswer = `V(${wrongX}, ${wrongY})`;
                    if (!alternatives.includes(wrongAnswer)) {
                        alternatives.push(wrongAnswer);
                    }
                }
            }
            
            // Embaralhar alternativas
            for (let i = alternatives.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [alternatives[i], alternatives[j]] = [alternatives[j], alternatives[i]];
            }
            
            // Encontrar posi√ß√£o da resposta correta
            correctAlternative = alternatives.indexOf(correctAnswer);
            
            // Preencher alternativas na interface
            const letters = ['A', 'B', 'C', 'D', 'E'];
            for (let i = 0; i < 5; i++) {
                document.getElementById(`label-${i}`).textContent = `${letters[i]}) ${alternatives[i]}`;
            }
            
            document.getElementById('alternatives-container').classList.remove('hidden');
        }

        // Selecionar alternativa
        function selectAlternative(index) {
            selectedAlternative = index;
            
            // Remover sele√ß√£o anterior
            document.querySelectorAll('.alternative').forEach(alt => {
                alt.classList.remove('selected');
                alt.querySelector('input').checked = false;
            });
            
            // Marcar nova sele√ß√£o
            const selectedElement = document.querySelectorAll('.alternative')[index];
            selectedElement.classList.add('selected');
            selectedElement.querySelector('input').checked = true;
        }

        // Alternar modo de resposta
        function toggleAnswerMode() {
            answerMode = answerMode === 'alternatives' ? 'open' : 'alternatives';
            
            const alternativesContainer = document.getElementById('alternatives-container');
            const answerInput = document.getElementById('answer-input');
            const toggleBtn = event.target;
            
            if (answerMode === 'alternatives') {
                alternativesContainer.classList.remove('hidden');
                answerInput.classList.add('hidden');
                toggleBtn.textContent = 'üî§ Modo Digita√ß√£o';
                if (currentProblem) {
                    generateAlternatives();
                }
            } else {
                alternativesContainer.classList.add('hidden');
                answerInput.classList.remove('hidden');
                toggleBtn.textContent = 'üìù Modo Alternativas';
            }
        }

        // Gerador de equa√ß√µes do 1¬∞ grau
        function generateEquation1() {
            let a, b, c, solution;
            
            switch(currentDifficulty) {
                case 'easy':
                    a = Math.floor(Math.random() * 9) + 1; // 1-9
                    solution = Math.floor(Math.random() * 20) - 10; // -10 a 10
                    b = Math.floor(Math.random() * 20) - 10; // -10 a 10
                    c = a * solution + b;
                    break;
                    
                case 'medium':
                    a = Math.floor(Math.random() * 19) + 1; // 1-19
                    solution = Math.round((Math.random() * 40 - 20) * 2) / 2; // Pode ser 0.5
                    b = Math.floor(Math.random() * 40) - 20; // -20 a 20
                    c = a * solution + b;
                    break;
                    
                case 'hard':
                    a = Math.floor(Math.random() * 29) + 1; // 1-29
                    solution = Math.round((Math.random() * 60 - 30) * 4) / 4; // Pode ser 0.25
                    b = Math.floor(Math.random() * 60) - 30; // -30 a 30
                    c = a * solution + b;
                    break;
            }
            
            let display = `${a}x`;
            if (b !== 0) {
                display += ` ${b >= 0 ? '+' : ''} ${b}`;
            }
            display += ` = ${c}`;
            
            return {
                type: 'equation1',
                a: a,
                b: b,
                c: c,
                solution: Math.round(solution * 100) / 100,
                display: display,
                hints: [
                    `Identifique os coeficientes: a = ${a}, b = ${b}, c = ${c}`,
                    `Mova o termo ${b} para o outro lado da equa√ß√£o`,
                    `Simplifique: ${a}x = ${c - b}`,
                    `Divida ambos os lados por ${a}`,
                    `A solu√ß√£o √© x = ${Math.round(solution * 100) / 100}`
                ]
            };
        }

        // Gerador de equa√ß√µes do 2¬∞ grau
        function generateEquation2() {
            let a, b, c, delta, solutions = [];
            
            switch(currentDifficulty) {
                case 'easy':
                    a = Math.floor(Math.random() * 3) + 1; // 1-3
                    // Garantir que delta seja um quadrado perfeito
                    const roots = [Math.floor(Math.random() * 8) - 4, Math.floor(Math.random() * 8) - 4];
                    b = -a * (roots[0] + roots[1]);
                    c = a * roots[0] * roots[1];
                    solutions = [roots[0], roots[1]].sort((x, y) => x - y);
                    break;
                    
                case 'medium':
                    a = Math.floor(Math.random() * 3) + 1; // 1-3
                    b = Math.floor(Math.random() * 15) - 7; // -7 a 7
                    c = Math.floor(Math.random() * 15) - 7; // -7 a 7
                    break;
                    
                case 'hard':
                    a = Math.floor(Math.random() * 5) + 1; // 1-5
                    b = Math.floor(Math.random() * 21) - 10; // -10 a 10
                    c = Math.floor(Math.random() * 21) - 10; // -10 a 10
                    break;
            }
            
            delta = b * b - 4 * a * c;
            
            let display = `${a}x¬≤`;
            if (b !== 0) {
                display += ` ${b >= 0 ? '+' : ''} ${b}x`;
            }
            if (c !== 0) {
                display += ` ${c >= 0 ? '+' : ''} ${c}`;
            }
            display += ' = 0';
            
            if (currentDifficulty !== 'easy') {
                solutions = [];
                if (delta > 0) {
                    const solution1 = (-b + Math.sqrt(delta)) / (2 * a);
                    const solution2 = (-b - Math.sqrt(delta)) / (2 * a);
                    solutions.push(Math.round(solution1 * 100) / 100);
                    solutions.push(Math.round(solution2 * 100) / 100);
                } else if (delta === 0) {
                    solutions.push(Math.round((-b / (2 * a)) * 100) / 100);
                }
            }
            
            return {
                type: 'equation2',
                a: a,
                b: b,
                c: c,
                delta: delta,
                solutions: solutions,
                display: display,
                hints: [
                    `Identifique os coeficientes: a = ${a}, b = ${b}, c = ${c}`,
                    `Calcule o discriminante: Œî = b¬≤ - 4ac = ${b}¬≤ - 4(${a})(${c}) = ${delta}`,
                    delta > 0 ? 'Como Œî > 0, existem duas solu√ß√µes reais' : 
                    delta === 0 ? 'Como Œî = 0, existe uma solu√ß√£o real' : 
                    'Como Œî < 0, n√£o existem solu√ß√µes reais',
                    delta >= 0 ? `Use a f√≥rmula de Bhaskara: x = (-${b} ¬± ‚àö${delta}) / ${2 * a}` : 'N√£o h√° solu√ß√µes reais para calcular',
                    delta > 0 ? `As solu√ß√µes s√£o: x‚ÇÅ = ${solutions[0]} e x‚ÇÇ = ${solutions[1]}` :
                    delta === 0 ? `A solu√ß√£o √©: x = ${solutions[0]}` : 'N√£o h√° solu√ß√µes reais'
                ]
            };
        }

        // Gerador de fun√ß√µes do 1¬∞ grau
        function generateFunction1() {
            const a = Math.floor(Math.random() * 9) + 1;
            const b = Math.floor(Math.random() * 20) - 10;
            const zero = Math.round((-b/a) * 100) / 100;
            
            let display = `f(x) = ${a}x`;
            if (b !== 0) {
                display += ` ${b >= 0 ? '+' : ''} ${b}`;
            }
            
            return {
                type: 'function1',
                a: a,
                b: b,
                display: display,
                zero: zero,
                hints: [
                    `Esta √© uma fun√ß√£o do 1¬∞ grau com a = ${a} e b = ${b}`,
                    `Para encontrar o zero, fa√ßa f(x) = 0`,
                    `Resolva: ${a}x + ${b} = 0`,
                    `O zero da fun√ß√£o √© x = ${zero}`
                ]
            };
        }

        // Gerador de fun√ß√µes do 2¬∞ grau
        function generateFunction2() {
            const a = Math.floor(Math.random() * 3) + 1;
            const b = Math.floor(Math.random() * 11) - 5;
            const c = Math.floor(Math.random() * 11) - 5;
            const vertexX = Math.round((-b/(2*a)) * 100) / 100;
            const vertexY = Math.round((-(b*b - 4*a*c)/(4*a)) * 100) / 100;
            
            let display = `f(x) = ${a}x¬≤`;
            if (b !== 0) {
                display += ` ${b >= 0 ? '+' : ''} ${b}x`;
            }
            if (c !== 0) {
                display += ` ${c >= 0 ? '+' : ''} ${c}`;
            }
            
            return {
                type: 'function2',
                a: a,
                b: b,
                c: c,
                display: display,
                vertex: { x: vertexX, y: vertexY },
                hints: [
                    `Esta √© uma fun√ß√£o do 2¬∞ grau com a = ${a}, b = ${b}, c = ${c}`,
                    `O v√©rtice tem coordenada x = -b/2a = ${vertexX}`,
                    `Substitua x no v√©rtice para encontrar y`,
                    `O v√©rtice √© V(${vertexX}, ${vertexY})`
                ]
            };
        }

        // Gerador de exerc√≠cios sobre zeros de fun√ß√£o do 1¬∞ grau
        function generateFunctionZero1() {
            const a = Math.floor(Math.random() * 9) + 1;
            const b = Math.floor(Math.random() * 20) - 10;
            const zero = Math.round((-b/a) * 100) / 100;
            
            let functionDisplay = `f(x) = ${a}x`;
            if (b !== 0) {
                functionDisplay += ` ${b >= 0 ? '+' : ''} ${b}`;
            }
            
            const display = `
                <strong>üìö Encontre o zero da fun√ß√£o:</strong><br>
                ${functionDisplay}<br>
                <small>üí° O zero da fun√ß√£o √© o valor de x onde f(x) = 0</small>
            `;
            
            return {
                type: 'functionZero1',
                a: a,
                b: b,
                display: display,
                solution: zero,
                hints: [
                    `Para encontrar o zero, fa√ßa f(x) = 0`,
                    `Substitua: ${a}x + ${b} = 0`,
                    `Isole x: ${a}x = ${-b}`,
                    `Divida por ${a}: x = ${zero}`
                ]
            };
        }

        // Gerador de exerc√≠cios sobre zeros de fun√ß√£o do 2¬∞ grau
        function generateFunctionZero2() {
            const a = Math.floor(Math.random() * 3) + 1;
            const b = Math.floor(Math.random() * 11) - 5;
            const c = Math.floor(Math.random() * 11) - 5;
            const delta = b * b - 4 * a * c;
            
            let functionDisplay = `f(x) = ${a}x¬≤`;
            if (b !== 0) {
                functionDisplay += ` ${b >= 0 ? '+' : ''} ${b}x`;
            }
            if (c !== 0) {
                functionDisplay += ` ${c >= 0 ? '+' : ''} ${c}`;
            }
            
            const display = `
                <strong>üìö Encontre os zeros da fun√ß√£o:</strong><br>
                ${functionDisplay}<br>
                <small>üí° Os zeros s√£o os valores de x onde f(x) = 0</small>
            `;
            
            let solutions = [];
            if (delta > 0) {
                const x1 = Math.round(((-b + Math.sqrt(delta)) / (2 * a)) * 100) / 100;
                const x2 = Math.round(((-b - Math.sqrt(delta)) / (2 * a)) * 100) / 100;
                solutions = [x1, x2].sort((a, b) => a - b);
            } else if (delta === 0) {
                solutions = [Math.round((-b / (2 * a)) * 100) / 100];
            }
            
            return {
                type: 'functionZero2',
                a: a,
                b: b,
                c: c,
                delta: delta,
                display: display,
                solutions: solutions,
                hints: [
                    `Para encontrar os zeros, fa√ßa f(x) = 0`,
                    `Temos: ${a}x¬≤ + ${b}x + ${c} = 0`,
                    `Calcule o discriminante: Œî = ${b}¬≤ - 4(${a})(${c}) = ${delta}`,
                    delta > 0 ? `Como Œî > 0, h√° dois zeros: x‚ÇÅ = ${solutions[0]} e x‚ÇÇ = ${solutions[1]}` :
                    delta === 0 ? `Como Œî = 0, h√° um zero: x = ${solutions[0]}` :
                    'Como Œî < 0, n√£o h√° zeros reais'
                ]
            };
        }

        // Gerador de exerc√≠cios de imagem de fun√ß√£o do 1¬∞ grau
        function generateFunctionImage1() {
            const a = Math.floor(Math.random() * 9) + 1;
            const b = Math.floor(Math.random() * 20) - 10;
            const inputValue = Math.floor(Math.random() * 11) - 5; // -5 a 5
            const outputValue = a * inputValue + b;
            
            let functionDisplay = `f(x) = ${a}x`;
            if (b !== 0) {
                functionDisplay += ` ${b >= 0 ? '+' : ''} ${b}`;
            }
            
            const display = `
                <strong>üìö Calcule o valor da fun√ß√£o:</strong><br>
                ${functionDisplay}<br>
                <strong>Calcule: f(${inputValue})</strong><br>
                <small>üí° Substitua x = ${inputValue} na fun√ß√£o</small>
            `;
            
            return {
                type: 'functionImage1',
                a: a,
                b: b,
                inputValue: inputValue,
                display: display,
                solution: outputValue,
                hints: [
                    `Substitua x = ${inputValue} na fun√ß√£o`,
                    `f(${inputValue}) = ${a}(${inputValue}) + ${b}`,
                    `f(${inputValue}) = ${a * inputValue} + ${b}`,
                    `f(${inputValue}) = ${outputValue}`
                ]
            };
        }

        // Gerador de exerc√≠cios de imagem de fun√ß√£o do 2¬∞ grau
        function generateFunctionImage2() {
            const a = Math.floor(Math.random() * 3) + 1;
            const b = Math.floor(Math.random() * 11) - 5;
            const c = Math.floor(Math.random() * 11) - 5;
            const inputValue = Math.floor(Math.random() * 7) - 3; // -3 a 3
            const outputValue = a * inputValue * inputValue + b * inputValue + c;
            
            let functionDisplay = `f(x) = ${a}x¬≤`;
            if (b !== 0) {
                functionDisplay += ` ${b >= 0 ? '+' : ''} ${b}x`;
            }
            if (c !== 0) {
                functionDisplay += ` ${c >= 0 ? '+' : ''} ${c}`;
            }
            
            const display = `
                <strong>üìö Calcule o valor da fun√ß√£o:</strong><br>
                ${functionDisplay}<br>
                <strong>Calcule: f(${inputValue})</strong><br>
                <small>üí° Substitua x = ${inputValue} na fun√ß√£o</small>
            `;
            
            return {
                type: 'functionImage2',
                a: a,
                b: b,
                c: c,
                inputValue: inputValue,
                display: display,
                solution: outputValue,
                hints: [
                    `Substitua x = ${inputValue} na fun√ß√£o`,
                    `f(${inputValue}) = ${a}(${inputValue})¬≤ + ${b}(${inputValue}) + ${c}`,
                    `f(${inputValue}) = ${a}(${inputValue * inputValue}) + ${b * inputValue} + ${c}`,
                    `f(${inputValue}) = ${a * inputValue * inputValue} + ${b * inputValue} + ${c}`,
                    `f(${inputValue}) = ${outputValue}`
                ]
            };
        }

        // Verificar resposta
        function checkAnswer() {
            if (!currentProblem) {
                showFeedback('Gere um problema primeiro!', 'info');
                return;
            }
            
            let correct = false;
            
            if (answerMode === 'alternatives') {
                // Modo alternativas
                if (selectedAlternative === -1) {
                    showFeedback('Selecione uma alternativa!', 'error');
                    return;
                }
                
                correct = selectedAlternative === correctAlternative;
                
                // Mostrar feedback visual nas alternativas
                document.querySelectorAll('.alternative').forEach((alt, index) => {
                    if (index === correctAlternative) {
                        alt.classList.add('correct');
                    } else if (index === selectedAlternative && !correct) {
                        alt.classList.add('incorrect');
                    }
                });
                
            } else {
                // Modo digita√ß√£o
                const userAnswer = document.getElementById('answer-input').value.trim();
                
                if (userAnswer === '') {
                    showFeedback('Digite uma resposta!', 'error');
                    return;
                }
                
                if (currentProblem.type === 'equation1' || currentProblem.type === 'function1' || 
                    currentProblem.type === 'functionZero1' || currentProblem.type === 'functionImage1' || 
                    currentProblem.type === 'functionImage2') {
                    const numericAnswer = parseFloat(userAnswer);
                    let expectedAnswer;
                    
                    if (currentProblem.type === 'equation1') {
                        expectedAnswer = currentProblem.solution;
                    } else if (currentProblem.type === 'function1') {
                        expectedAnswer = currentProblem.zero;
                    } else if (currentProblem.type === 'functionZero1' || 
                               currentProblem.type === 'functionImage1' || 
                               currentProblem.type === 'functionImage2') {
                        expectedAnswer = currentProblem.solution;
                    }
                    
                    correct = Math.abs(numericAnswer - expectedAnswer) < 0.01;
                } else if (currentProblem.type === 'equation2' || currentProblem.type === 'functionZero2') {
                    if (currentProblem.solutions.length === 0) {
                        correct = userAnswer.toLowerCase().includes('n√£o') || 
                                userAnswer.toLowerCase().includes('sem') || 
                                userAnswer.toLowerCase().includes('imposs√≠vel') ||
                                userAnswer.toLowerCase().includes('zero');
                    } else {
                        const numericAnswer = parseFloat(userAnswer);
                        correct = currentProblem.solutions.some(sol => Math.abs(numericAnswer - sol) < 0.01);
                    }
                } else if (currentProblem.type === 'function2') {
                    const userVertex = userAnswer.match(/\(([^,]+),([^)]+)\)/);
                    if (userVertex) {
                        const userX = parseFloat(userVertex[1]);
                        const userY = parseFloat(userVertex[2]);
                        correct = Math.abs(userX - currentProblem.vertex.x) < 0.01 && Math.abs(userY - currentProblem.vertex.y) < 0.01;
                    }
                }
            }
            
            // Registrar desempenho
            recordAnswer(correct);
            
            // Mostrar feedback
            if (correct) {
                showFeedback('üéâ Parab√©ns! Resposta correta!', 'success');
            } else {
                showFeedback('‚ùå Resposta incorreta. Tente novamente ou use uma dica.', 'error');
            }
            
            // Atualizar painel administrativo se for professor
            if (userType === 'professor') {
                updateAdminPanel();
            }
        }

        // Mostrar dica
        function showHint() {
            if (!currentProblem) {
                showFeedback('Gere um problema primeiro!', 'info');
                return;
            }
            
            const hintsSection = document.getElementById('hints');
            const hintsList = document.getElementById('hints-list');
            
            if (hintCount < currentProblem.hints.length) {
                const hintElement = document.createElement('div');
                hintElement.className = 'hint-item';
                hintElement.textContent = `${hintCount + 1}. ${currentProblem.hints[hintCount]}`;
                hintsList.appendChild(hintElement);
                
                hintsSection.classList.remove('hidden');
                hintCount++;
            } else {
                showFeedback('Todas as dicas j√° foram mostradas!', 'info');
            }
        }

        // Mostrar solu√ß√£o completa
        function showSolution() {
            if (!currentProblem) {
                showFeedback('Gere um problema primeiro!', 'info');
                return;
            }
            
            let solutionText = '';
            
            if (currentProblem.type === 'equation1') {
                solutionText = `Solu√ß√£o completa:\n${currentProblem.display}\n`;
                solutionText += `${currentProblem.a}x = ${currentProblem.c} - (${currentProblem.b})\n`;
                solutionText += `${currentProblem.a}x = ${currentProblem.c - currentProblem.b}\n`;
                solutionText += `x = ${currentProblem.c - currentProblem.b} √∑ ${currentProblem.a}\n`;
                solutionText += `x = ${currentProblem.solution}`;
            } else if (currentProblem.type === 'equation2') {
                solutionText = `Solu√ß√£o completa:\n${currentProblem.display}\n`;
                solutionText += `Œî = ${currentProblem.b}¬≤ - 4(${currentProblem.a})(${currentProblem.c}) = ${currentProblem.delta}\n`;
                if (currentProblem.delta > 0) {
                    solutionText += `x = (${-currentProblem.b} ¬± ‚àö${currentProblem.delta}) √∑ ${2 * currentProblem.a}\n`;
                    solutionText += `x‚ÇÅ = ${currentProblem.solutions[0]}, x‚ÇÇ = ${currentProblem.solutions[1]}`;
                } else if (currentProblem.delta === 0) {
                    solutionText += `x = ${-currentProblem.b} √∑ ${2 * currentProblem.a} = ${currentProblem.solutions[0]}`;
                } else {
                    solutionText += `Como Œî < 0, n√£o existem solu√ß√µes reais.`;
                }
            } else if (currentProblem.type === 'function1') {
                solutionText = `Zero da fun√ß√£o:\n${currentProblem.display} = 0\n`;
                solutionText += `${currentProblem.a}x + ${currentProblem.b} = 0\n`;
                solutionText += `x = -${currentProblem.b} √∑ ${currentProblem.a}\n`;
                solutionText += `x = ${currentProblem.zero}`;
            } else if (currentProblem.type === 'function2') {
                solutionText = `V√©rtice da par√°bola:\n${currentProblem.display}\n`;
                solutionText += `x = -${currentProblem.b} √∑ (2 √ó ${currentProblem.a}) = ${currentProblem.vertex.x}\n`;
                solutionText += `y = f(${currentProblem.vertex.x}) = ${currentProblem.vertex.y}\n`;
                solutionText += `V√©rtice: V(${currentProblem.vertex.x}, ${currentProblem.vertex.y})`;
            }
            
            showFeedback(solutionText, 'info');
        }

        // Resolver equa√ß√£o personalizada
        function solveCustomEquation() {
            const equation = document.getElementById('custom-equation').value.trim();
            const solutionDiv = document.getElementById('custom-solution');
            
            if (equation === '') {
                solutionDiv.textContent = 'Digite uma equa√ß√£o primeiro!';
                solutionDiv.className = 'feedback error';
                solutionDiv.classList.remove('hidden');
                return;
            }
            
            solutionDiv.textContent = 'Funcionalidade de resolu√ß√£o autom√°tica em desenvolvimento. Use os exerc√≠cios pr√°ticos por enquanto.';
            solutionDiv.className = 'feedback info';
            solutionDiv.classList.remove('hidden');
        }

        // Limpar equa√ß√£o personalizada
        function clearCustom() {
            document.getElementById('custom-equation').value = '';
            document.getElementById('custom-solution').classList.add('hidden');
        }

        // Fun√ß√£o utilit√°ria para mostrar feedback
        function showFeedback(message, type) {
            const feedback = document.getElementById('feedback');
            feedback.textContent = message;
            feedback.className = `feedback ${type}`;
            feedback.classList.remove('hidden');
        }

        // Verificar Enter no campo de resposta
        function checkEnter(event) {
            if (event.key === 'Enter') {
                checkAnswer();
            }
        }

        // ==================== FERRAMENTAS ADMINISTRATIVAS ====================
        
        // Limpar todos os alunos cadastrados (apenas para professores)
        function clearAllStudents() {
            if (userType !== 'professor') {
                alert('Acesso negado! Apenas professores podem executar esta a√ß√£o.');
                return;
            }
            
            const currentStudents = getStudents();
            const confirmation = confirm(`‚ö†Ô∏è ATEN√á√ÉO! ‚ö†Ô∏è\n\nVoc√™ est√° prestes a REMOVER PERMANENTEMENTE todos os ${currentStudents.length} alunos cadastrados!\n\n‚Ä¢ Esta a√ß√£o N√ÉO pode ser desfeita\n‚Ä¢ Todos os dados de login ser√£o perdidos\n‚Ä¢ Os alunos precisar√£o se cadastrar novamente\n\nTem certeza que deseja continuar?`);
            
            if (confirmation) {
                const secondConfirmation = confirm('üö® CONFIRMA√á√ÉO FINAL üö®\n\nClique OK para prosseguir com a exclus√£o de todos os alunos.');
                
                if (secondConfirmation) {
                    // Limpar localStorage dos estudantes
                    localStorage.removeItem(DB.students);
                    
                    // Resetar estat√≠sticas relacionadas
                    resetStatistics();
                    
                    // Atualizar interface
                    updateAdminPanel();
                    
                    alert(`‚úÖ Sucesso!\n\n${currentStudents.length} alunos foram removidos do sistema.\n\nO banco de dados foi limpo e as estat√≠sticas foram resetadas.`);
                } else {
                    alert('‚ùå Opera√ß√£o cancelada pelo usu√°rio.');
                }
            } else {
                alert('‚ùå Opera√ß√£o cancelada pelo usu√°rio.');
            }
        }

        // Exportar dados dos estudantes
        function exportStudentData() {
            if (userType !== 'professor') {
                alert('Acesso negado! Apenas professores podem executar esta a√ß√£o.');
                return;
            }
            
            const students = getStudents();
            
            if (students.length === 0) {
                alert('üìä Nenhum aluno cadastrado para exportar.');
                return;
            }
            
            // Criar dados para exporta√ß√£o
            const exportData = {
                exportDate: new Date().toISOString(),
                totalStudents: students.length,
                students: students.map(student => ({
                    name: student.name,
                    email: student.email,
                    grade: student.grade,
                    class: student.class,
                    createdAt: student.createdAt
                }))
            };
            
            // Converter para JSON formatado
            const jsonData = JSON.stringify(exportData, null, 2);
            
            // Criar arquivo para download
            const blob = new Blob([jsonData], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `alunos_exportados_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert(`üìä Dados exportados com sucesso!\n\n‚Ä¢ ${students.length} alunos exportados\n‚Ä¢ Arquivo JSON baixado\n‚Ä¢ Data: ${new Date().toLocaleDateString()}`);
        }

        // Resetar estat√≠sticas do sistema
        function resetStatistics() {
            if (userType !== 'professor') {
                alert('Acesso negado! Apenas professores podem executar esta a√ß√£o.');
                return;
            }
            
            const confirmation = confirm('üîÑ Resetar Estat√≠sticas\n\nIsso ir√° zerar:\n‚Ä¢ Exerc√≠cios resolvidos\n‚Ä¢ Taxa de acerto\n‚Ä¢ Sess√µes ativas\n\nDeseja continuar?');
            
            if (confirmation) {
                // Resetar estat√≠sticas locais
                performanceStats = {
                    correct: 0,
                    wrong: 0,
                    total: 0,
                    percentage: 0
                };
                
                sessionStats = {
                    exercisesSolved: 0,
                    correctAnswers: 0,
                    startTime: new Date()
                };
                
                // Limpar localStorage de estat√≠sticas
                localStorage.removeItem(DB.stats);
                
                // Atualizar interfaces
                updatePerformanceBoard();
                updateAdminPanel();
                
                alert('‚úÖ Estat√≠sticas resetadas com sucesso!');
            }
        }

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            initDatabase();
            updateContent();
            updateExerciseExplanation();
            updatePerformanceBoard();
            updateExerciseTypeVisibility(); // Controlar visibilidade inicial dos bot√µes
            
            // Verificar se h√° sess√£o ativa (opcional, para futuras implementa√ß√µes)
            // Por enquanto, sempre mostrar login
            showStudentLogin();
        });
    </script>
</body>
</html>
